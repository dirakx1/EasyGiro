# Dockerfile for private node installation

FROM ubuntu:bionic-20200311
RUN apt-get update
RUN apt-get install -y pkg-config zip g++ zlib1g-dev unzip python \
apt-transport-https ca-certificates curl software-properties-common wget

## Download bazel installer 

RUN wget https://github.com/bazelbuild/bazel/releases/download/0.29.0/bazel-0.29.0-installer-linux-x86_64.sh
RUN chmod +x bazel-0.29.0-installer-linux-x86_64.sh
RUN ./bazel-0.29.0-installer-linux-x86_64.sh --user 

## Install docker 

RUN apt-get install -y docker.io
RUN docker --version

# Install jq

RUN apt-get install -y jq locate

## Clone and install compass 

RUN git clone https://github.com/iotaledger/compass.git
RUN cd compass && /root/.bazel/bin/bazel run //docker:layers_calculator

